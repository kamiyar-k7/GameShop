@model Application.ViewModel.UserSide.CatalogViewModel


<div class="nk-main">

    <!-- START: Breadcrumbs -->
    <div class="nk-gap-1"></div>
    <div class="container">
        <ul class="nk-breadcrumbs">


            <li><a asp-controller="Home" asp-action="Index">Home</a></li>


            <li><span class="fa fa-angle-right"></span></li>

            <li><a asp-controller="Store" asp-action="Home">Store</a></li>


            <li><span class="fa fa-angle-right"></span></li>

            <li><span>All Games</span></li>

        </ul>
    </div>
    <div class="nk-gap-1"></div>
    <!-- END: Breadcrumbs -->




    <div class="container">
        <!-- START: Categories -->
        <div class="row vertical-gap">
            <div class="col-lg-4">
                <div class="nk-feature-1">
                    <div class="nk-feature-icon">
                        <img src="~/assets/images/icon-mouse.png" alt="">
                    </div>
                    <div class="nk-feature-cont">
                        <h3 class="nk-feature-title"><a href="#">PC</a></h3>
                        <h3 class="nk-feature-title text-main-1"><a href="#">View Games</a></h3>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="nk-feature-1">
                    <div class="nk-feature-icon">
                        <img src="~/assets/images/icon-gamepad.png" alt="">
                    </div>
                    <div class="nk-feature-cont">
                        <h3 class="nk-feature-title"><a href="#">PS4</a></h3>
                        <h3 class="nk-feature-title text-main-1"><a href="#">View Games</a></h3>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="nk-feature-1">
                    <div class="nk-feature-icon">
                        <img src="~/assets/images/icon-gamepad-2.png" alt="">
                    </div>
                    <div class="nk-feature-cont">
                        <h3 class="nk-feature-title"><a href="#">Xbox</a></h3>
                        <h3 class="nk-feature-title text-main-1"><a href="#">View Games</a></h3>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: Categories -->
        <!-- START: Products Filter -->
        <div class="nk-gap-2"></div>
        <div class="row vertical-gap">
            <div class="col-lg-8">
                <div class="row vertical-gap" style="justify-content: space-around; align-items: center;">
                    <div class="col-md-4">
                        <select class="form-control">
                            <option value="" disabled selected>Select Genre</option>
                            @if (Model.Genres != null)
                            {

                                @foreach (var item in Model.Genres)
                                {

                                    <option value="@item.Id">@item.GenreName</option>

                                }
                            }



                        </select>
                    </div>
                    <div class="col-md-4">
                        <select class="form-control">
                            <option value="" disabled selected>Select Platform</option>

                            @foreach (var item in Model.platforms)
                            {
                                <option value="@item.Id">@item.PlatformUniqueName</option>

                            }
                           
                          


                        </select>
                    </div>
                    <div class="col-md-8">
                        <div class="nk-input-slider-inline">
                            <div class="nk-input-slider">
                                <div class="nk-input-slider-content text-white">
                                    PRICE:
                                    <strong class="text-main-1">€ <span class="nk-input-slider-value-0"></span></strong>
                                    -
                                    <strong class="text-main-1">€ <span class="nk-input-slider-value-1"></span></strong>
                                </div>

                                @{
                                    var maxprice = Model.games.Max(x => x.Price);
                                    var minprice = Model.games.Min(x => x.Price);
                                }



                                <div class="nk-input-slider-input">
                                    <input type="text"
                                           name="price-filter"
                                           data-slider-min="@minprice"
                                           data-slider-max="@maxprice"
                                           data-slider-step="1"
                                           data-slider-value="[@minprice, @maxprice]"
                                           data-slider-tooltip="hide">
                                </div>
                            </div>
                            <div>
                                <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-white">Apply</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <form action="#" class="nk-form" novalidate="novalidate">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Type something...">
                        <button class="nk-btn nk-btn-color-main-1"><span class="ion-search"></span></button>
                    </div>
                </form>
            </div>
        </div>
        <!-- END: Products Filter -->

        <div class="nk-gap-2"></div>
        <!-- START: Products -->
        <div class="row vertical-gap">

            @foreach (var game in Model.games)
            {


                @if (game != null)
                {
                    <div class="col-lg-6">
                        <div class="nk-product-cat-2">

                            @if (game != null)
                            {
                                var firstscreenshot = game.Screenshots.First().AvararUrl;

                                <a class="nk-product-image" href="store-product.html">
                                    <img src="~/assets/images/GameImages/@firstscreenshot" alt="@game.Name" style="background: url('~/assets/images/@firstscreenshot') no-repeat center fixed; background-size:cover width: 205px; height: 160px;">
                                </a>
                            }




                            <div class="nk-product-cont">
                                <h3 class="nk-product-title h5"><a href="store-product.html">@game.Name</a></h3>
                                <div class="nk-gap-1"></div>

                                <div class="nk-product-rating" data-rating="@game.Rating">
                                    @{
                                        // Calculate the number of full stars and half star based on the Rating value
                                        int fullStars1 = (int)Math.Floor(game.Rating);
                                        bool hasHalfStar1 = game.Rating - fullStars1 >= 0.5;
                                    }
                                    @for (int i = 0; i < 5; i++)
                                    {
                                        if (i < fullStars1)
                                        {
                                            // Render full star icon
                                            <i class="fa fa-star"></i>
                                        }
                                        else if (hasHalfStar1 && i == fullStars1)
                                        {
                                            // Render half star icon
                                            <i class="fas fa-star-half"></i>
                                        }
                                        else
                                        {
                                            // Render empty star icon
                                            <i class="far fa-star"></i>
                                        }
                                    }
                                </div>
                                <div class="nk-gap-1"></div>
                                @game.Description
                                <div class="nk-gap-2"></div>
                                <div class="nk-product-price">€ @game.Price</div>
                                <div class="nk-gap-1"></div>
                                <a href="#" class="nk-btn nk-btn-rounded nk-btn-color-dark-3 nk-btn-hover-color-main-1">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <p>OUt OF GAME</p>
                }
            }

        </div>
        <!-- END: Products -->
        <!-- START: Pagination -->
        <div class="nk-gap-3"></div>
        <div class="nk-pagination nk-pagination-center">
            <a href="#" class="nk-pagination-prev">
                <span class="ion-ios-arrow-back"></span>
            </a>
            <nav>
                <a class="nk-pagination-current" href="#">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
                <span>...</span>
                <a href="#">14</a>
            </nav>
            <a href="#" class="nk-pagination-next">
                <span class="ion-ios-arrow-forward"></span>
            </a>
        </div>
        <!-- END: Pagination -->
        <!-- START: Most Popular -->
        <div class="nk-gap-3"></div>
        <h3 class="nk-decorated-h-2"><span><span class="text-main-1">Most</span> Popular</span></h3>
        <div class="nk-gap"></div>
        <div class="row vertical-gap">

            @{
                var top6 = Model.games.OrderByDescending(x => x.Rating).Take(6);
            }
            @foreach (var game in top6)
            {
                if (game != null)
                {
                    <div class="col-lg-4 col-md-6">
                        <div class="nk-product-cat">
                            @if (game.Screenshots != null)
                            {
                                var firstscreenshot = game.Screenshots.First();

                                <a class="nk-product-image" href="store-product.html">
                                    <img src="~/assets/images/GameImages/@firstscreenshot" alt="@game.Name" style="background: url('~/assets/images/@firstscreenshot') no-repeat center fixed; background-size:cover width: 205px; height: 160px;">
                                </a>
                            }

                            <div class="nk-product-cont">
                                <h3 class="nk-product-title h5"><a href="store-product.html">@game.Name</a></h3>
                                <div class="nk-gap-1"></div>
                                @{

                                    int fullStars1 = (int)Math.Floor(game.Rating);
                                    bool hasHalfStar1 = game.Rating - fullStars1 >= 0.5;
                                }
                                @for (int i = 0; i < 5; i++)
                                {
                                    if (i < fullStars1)
                                    {
                                        // Render full star icon
                                        <i class="fa fa-star"></i>
                                    }
                                    else if (hasHalfStar1 && i == fullStars1)
                                    {
                                        // Render half star icon
                                        <i class="fas fa-star-half"></i>
                                    }
                                    else
                                    {
                                        // Render empty star icon
                                        <i class="far fa-star"></i>
                                    }
                                }
                                <div class="nk-gap-1"></div>
                                <div class="nk-product-price">€ @game.Price</div>
                            </div>
                        </div>
                    </div>

                }

            }

        </div>
        <!-- END: Most Popular -->
    </div>

    <div class="nk-gap-2"></div>

</div>




